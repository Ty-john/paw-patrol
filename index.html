<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paw Patrol | Pet Adoption & Welfare</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="adopt.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <!-- ========== HEADER ========== -->
    <header>
        <a href="#" class="logo-link">
            <aside class="logo-container">
                <div class="logo-img-container">
                    <img src="./images/logo1.png" alt="">
                </div>
                <h3>Paw Patrol</h3>
            </aside>
        </a>
  
        <nav class="navigation" id="nav-menu">
            <a href="#">Home</a>                     <!-- top of page -->
            <a href="#adopt">Adopt</a>               <!-- scrolls to Adopt section -->
            <a href="#about">About Us</a>            <!-- scrolls to About -->
            <a href="#help">Get Involved</a>         <!-- scrolls to Involved -->
            <a href="#care">Petcare Tips</a>         <!-- scrolls to Tips -->
        </nav>

        
        <div class="small-screen-menu" id="small-screen-menu">
            <a href="#">Home</a>
            <a href="#adopt">Adopt</a>
            <a href="#about">About Us</a>
            <a href="#help">Get Involved</a>
            <a href="#care">Petcare Tips</a>
        </div>


        <div class="menu-toggle" id="menu-toggle">
            <i class="fa-solid fa-bars"></i>
        </div>
    </header>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="main-content page active" id="main-content">
        <!-- ========== HERO SECTION ========== -->
        <section class="hero">
            <div class="parallax-wrapper">
                <div class="layer sky"></div>
                <div class="layer mid"></div>
                <div class="layer tower"></div>
                <div class="layer back"></div>
                <div class="layer front"></div>
            </div>

            <div class="hero-content">
                <h2>Find Your Furever Friend üêæ</h2>
                <p>Open your heart and home ‚Äî adopt a pet today!</p>
                <a href="#adopt" class="btn">Adopt Today</a>
            </div>
        </section>
        
        <!-- ===== Adopt a Pet ===== -->
        <section id="adopt">
            <h2>Adopt a Pet <i class="fa-solid fa-chevron-right"></i></h2>
            <div class="container-adopt-card" id="container-adopt-card">
                <!-- Populate in JS -->
            </div>

            <div class="adopt-buttons">
                <aside>
                    <i class="fa-solid fa-list-check"></i>
                    <h3>Adoption Process</h3>
                    <p>Step-by-step guide on adopting a pet</p>
                    <a href="adoptionProcess.html">Proceed</a>
                </aside>
                <aside>
                    <i class="fa-solid fa-circle-exclamation"></i>
                    <h3>Adoption Requirements</h3>
                    <p>Eligibility and required documents</p>
                    <a href="adoptionRequirements.html">Proceed</a>
                </aside>
                <aside>
                    <i class="fa-solid fa-book-open"></i>
                    <h3>Success Stories</h3>
                    <p>Happy tales of pets finding their forever homes</p>
                    <a href="successStories.html">Proceed</a>
                </aside>
                <aside>
                    <i class="fa-solid fa-envelope"></i>
                    <h3>Adoption Form</h3>
                    <p>Online form or link to apply for adoption</p>
                    <a href="adoptForm.html">Proceed</a>
                </aside>
            </div>            
        </section>

        <!-- ===== About Us ===== -->
        <section id="about">
            <div class="about-header">
                <h2>About Us</h2>
                <p>Connecting hearts, one paw at a time.</p>
            </div>
            
            <div class="upper-about">
                <aside class="mission-vision">
                    <article class="mission">
                        <h3>Our Mission</h3>
                        <p>To rescue, rehabilitate, and rehome animals in need, and to promote responsible pet ownership.</p>
                    </article>

                    <article class="vision">
                        <h3>Our Vision</h3>
                        <p>Our vision is to create a community where every pet finds a loving, safe, and permanent home.</p>
                    </article>

                    <article class="choose-us">
                        <h3>Why Choose Us?</h3>
                        <p>We carefully match pets with responsible owners and provide support to help them thrive in their new homes.</p>
                    </article>
                </aside>

                <aside class="our-team">
                    <div class="team-img-container">
                        <img src="images/adoptImages/team.jpg" alt="">
                    </div>

                    <div class="team-people-container">
                        <article class="team-people">
                            <h3>Sarah</h3>
                            <p>Founder</p>
                            <p>Chief of Staff & Director</p>
                        </article>
                        <article class="team-people">
                            <h3>Ben</h3>
                            <p>Veterinarian</p>
                            <p>Adoption Coordinator</p>
                        </article>
                        <article class="team-people">
                            <h3>Rickon</h3>
                            <p>Volunteer</p>
                            <p>Volunteer Coordinator</p>
                        </article>
                    </div>
                    
                </aside>
            </div>

            <hr>

            <div class="bottom-about">
                <aside class="gallery">
                    <h3>Our Gallery</h3>
                    <div class="gallery-container" id="gallery-container">
                            <!-- to be populated in JS -->
                    </div>
                </aside>
                <hr>
                <aside class="news-blog">
                    <h3>News & Blog</h3>
                    <div class="news-container" id="news-container">
                        <!-- to be populated in JS -->
                    </div>
                </aside>
            </div>
        </section>


        <!-- ===== Get Involved ===== -->
        <section id="help">
            <h2>Get Involved <i class="fa-solid fa-chevron-right"></i></h2>
            <div class="involved-container">
                <div class="donate-actions">
                    <article class="donate">
                        <i class="fa-solid fa-hand-holding-heart"></i>
                        <h3>Donate to Us</h3>
                        <p>Support our mission with one-time or recurring donation.</p>
                        <button class="switch-btn" data-show="donation">Donate Now</button>
                    </article>

                    <article class="wishlist">
                        <i class="fa-solid fa-gift"></i>
                        <h3>Wishlist</h3>
                        <p>Fulfill our immediate needs by purchasing items from our wishlist.</p>
                        <button class="switch-btn" data-show="wishlist">See Wishlist</button>
                    </article>
                </div>
                
                <div class="help-actions">
                    <article class="volunteer">
                        <aside class="volunteer-img-container">
                            <img src="images/volunteer.jpg" alt="">
                        </aside>
                        <aside class="volunteer-form">
                            <p><b>Be a Volunteer: </b>Join our team of dedicated volunteers and make a difference.</p>
                            <button class="switch-btn" data-show="volunteer-main">Sign Up</button>
                        </aside>
                    </article>

                    <article class="events">
                        <aside class="volunteer-img-container">
                            <img src="images/event.jpg" alt="">
                        </aside>
                        <aside class="volunteer-form">
                            <p><b>Be with Us: </b>Participate in our upcoming community events and fundraisers.</p>
                            <button class="switch-btn" data-show="event">View Calendar</button>
                        </aside>
                    </article>
                </div>
            </div>
        </section>

        <!-- ===== Pet Care Tips ===== -->
        <section id="care">
            <h2>Pet Care Tips <i class="fa-solid fa-chevron-right"></i></h2>
            <div class="care-tips-container">
                <article class="training" onclick="openCareOverlay('training')">
                    <aside class="care-img-container">
                        <img src="images/pet-training.jpg" alt="">
                    </aside>
                    <i class="fa-solid fa-chevron-up"></i>
                    <h3>Training Tips</h3>
                </article>

                <article class="health" onclick="openCareOverlay('health')">
                    <aside class="care-img-container">
                        <img src="images/pet-nutrition.jpg" alt="">
                    </aside>
                    <i class="fa-solid fa-chevron-up"></i>
                    <h3>Health & Nutrition</h3>
                </article>

                <article class="grooming" onclick="openCareOverlay('grooming')">
                    <aside class="care-img-container">
                        <img src="images/pet-grooming.jpg" alt="">
                    </aside>
                    <i class="fa-solid fa-chevron-up"></i>
                    <h3>Grooming Tips</h3>
                </article>

                <article class="emergency" onclick="openCareOverlay('emergency')">
                    <aside class="care-img-container">
                        <img src="images/pet-emegency-care.jpg" alt="">
                    </aside>
                    <i class="fa-solid fa-chevron-up"></i>
                    <h3>Emergency Care</h3>
                </article>
            </div>
            
        </section>

        <!-- ===== 3D Tower Model ===== -->
        <section id="tower-model">
            <h2>Paw Patrol Tower <i class="fa-solid fa-chevron-right"></i></h2>
            <div class="sketchfab-container">
                <iframe title="Paw Patrol Tower" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" allow="autoplay; fullscreen; xr-spatial-tracking" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share width="100%" height="500" src="https://sketchfab.com/3d-models/mobile-paw-patrol-rescue-world-lookout-tower-46e255a054c84f6cb2eff1f5ba7602bd/embed"></iframe>
            </div>
        </section>
    </main>

    <!-- ==== Donation ==== -->
    <main class="donation page pet-details-main" id="donation">
        <section class="pet-details-container">
            <!-- FORM CARD -->
            <form id="donationForm" class="adoption-form">
                <div class="pet-header">
                    <h1>Donate Now</h1>
                    <p>Your generosity makes a difference in our animals' lives</p>
                </div>

                <div class="form-sections">
                    <!-- DONATION AMOUNT SECTION -->
                    <!-- LEFT COLUMN -->
                    <aside id="donate-left-col">
                        <h3>Select Donation Amount</h3>
                        <div class="amount-options">
                            <div class="amount" data-value="100">‚Ç±100</div>
                            <div class="amount" data-value="200">‚Ç±200</div>
                            <div class="amount" data-value="500">‚Ç±500</div>
                            <div class="amount" data-value="1000">‚Ç±1000</div>
                            <div class="amount custom">Custom Amount</div>
                        </div>
                        <div class="form-group" id="customAmountGroup" style="display: none;">
                            <label for="customAmount">Enter Amount</label>
                            <input type="number" id="customAmount" name="customAmount" placeholder="Enter custom amount" min="1">
                        </div>
                        <input type="hidden" id="selectedAmount" name="selectedAmount" value="0">
                        <div class="donation-img-container" id="donation-img-container" style="display: none;">
                            <!-- Image to be put here from wishlist -->
                        </div>
                    </aside>

                    <!-- DONOR INFORMATION SECTION -->
                    <!-- RIGHT COLUMN -->
                    <aside>
                        <h3>Your Information</h3>
                        <div class="form-group">
                            <label for="donor-fullname">Full Name</label>
                            <input type="text" id="donor-fullname" name="fullname" placeholder="Full Name" required>
                        </div>
                        <div class="form-group">
                            <label for="donor-email">Email Address</label>
                            <input type="email" id="donor-email" name="email" placeholder="Email Address" required>
                        </div>
                        <div class="form-group">
                            <label for="donor-contact">Contact Number</label>
                            <input type="text" id="donor-contact" name="contact" placeholder="Contact Number">
                        </div>
                        <div class="form-group">
                            <label for="donor-message">Message/Suggestion</label>
                            <textarea id="donor-message" name="message" placeholder="Message (optional)"></textarea>
                        </div>
                    </aside>
                </div>
                    
                <div class="pet-actions">
                    <button class="adoptbtn btn-primary" type="submit">Submit Donation</button>
                    <button class="adoptbtn btn-secondary" type="button" onclick="switchPage('main-content')">Cancel</button>
                </div>
            </form>
        </section>
    </main>

    <!-- ==== Wishlist ==== -->
    <main class="wishlist page" id="wishlist">
        <section class="wish-header">
            <h2>Our Shelter's Wishlist</h2>
            <p>Help us provide the best care by donating these essential items.</p>
        </section>
        <section class="navigation">
            <button class="filter-btn active" data-category="all">All Items</button>
            <button class="filter-btn" data-category="food">Pet Foods</button>
            <button class="filter-btn" data-category="bed or cages">Beds & Cages</button>
            <button class="filter-btn" data-category="vitamins & health">Vitamins & Health</button>
            <button class="filter-btn" data-category="toys & enrichment">Toys & Enrichment</button>
        </section>
        <hr>
        <section class="wish-container">
            <!-- Populate with Cards -->
        </section>
        <button class="switch-btn back" data-show="main-content">Return to homepage</button>
    </main>

    <!-- ==== Volunteer ==== -->
    <main class="volunteer-main page" id="volunteer-main">
        <section class="volunteer-section">

            <div class="volunteer-header">
                <h1>Become a Paw Patrol Volunteer</h1>
                <p>Join our team and make a difference in the lives of animals!</p>
            </div>

            <form class="volunteer-form">
                <section class="vol-info">
                    <!-- CONTACT INFORMATION SECTION -->
                    <div class="form-section">
                        <h3><i class="fa-solid fa-user"></i> Your Contact Information</h3>
                        
                        <div class="form-group">
                            <label for="fullName">Full Name <span class="required">*</span></label>
                            <input type="text" id="fullName" name="fullName" required placeholder="Juan Dela Cruz">
                        </div>

                        <div class="form-group">
                            <label for="email">Email <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required placeholder="you@email.com">
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" required placeholder="0912 345 6789">
                        </div>

                        <div class="form-group">
                            <label for="address">Address <span class="required">*</span></label>
                            <input type="text" id="address" name="address" required placeholder="Complete Address">
                        </div>
                    </div>

                    <!-- AVAILABILITY & INTERESTS SECTION -->
                    <div class="form-section">
                        <h3><i class="fa-solid fa-calendar"></i> Availability & Interests</h3>
                        
                        <div class="form-group">
                            <label for="availability">Preferred Availability <span class="required">*</span></label>
                            <select id="availability" name="availability" required>
                                <option value="" disabled selected>Select your preferred time</option>
                                <option>Weekdays (Morning)</option>
                                <option>Weekdays (Afternoon)</option>
                                <option>Weekends (Morning)</option>
                                <option>Weekends (Afternoon)</option>
                                <option>Flexible</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="commitment">Commitment Level <span class="required">*</span></label>
                            <select id="commitment" name="commitment" required>
                                <option value="" disabled selected>Select your commitment level</option>
                                <option>A few hours per week</option>
                                <option>1-2 days per week</option>
                                <option>3+ days per week</option>
                                <option>As needed (flexible)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="areaOfInterest">Area of Interest <span class="required">*</span></label>
                            <select id="areaOfInterest" name="areaOfInterest" required>
                                <option value="" disabled selected>Select your area of interest</option>
                                <option>Animal Care (feeding, walking)</option>
                                <option>Event Support & Fundraising</option>
                                <option>Administrative Tasks</option>
                                <option>Social Media & Outreach</option>
                                <option>Fostering Animals</option>
                                <option>Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="experience">Why do you want to volunteer? </label>
                            <textarea id="experience" name="experience" rows="4" placeholder="Tell us about your motivation or any relevant experience you have with animals or volunteering..."></textarea>
                        </div>
                    </div>
                </section>

                <!-- INFO BOX -->
                <div class="volunteer-info-box">
                    <h3><i class="fa-solid fa-lightbulb"></i> What to Expect</h3>
                    <p>After submitting your application, our team will review it and contact you within 3-5 business days. We'll discuss available positions, schedule a brief orientation, and get you started on your volunteer journey!</p>
                </div>

                <!-- FORM ACTIONS -->
                <div class="volunteer-actions">
                    <button type="submit" class="btn btn-primary">Submit Application</button>
                    <a href="index.html" class="btn btn-secondary">Cancel</a>
                </div>
            </form>

        </section>
    </main>

    <!-- ==== Event/Fundraiser ==== -->
    <main class="event page" id="event">
        <section class="event-header">
                <h2>Events</h2>
                <p>Be part of our mission‚Äîjoin our events and fundraisers. No sign-up needed, just come and lend your support!</p>
        </section>
        
        <section class="nav">
                <button class="event-filter-btn active" data-category="all">All</button>
                <button class="event-filter-btn" data-category="upcoming">
                    Upcoming <span class="count upcoming-count"></span>
                </button>
                <button class="event-filter-btn" data-category="past">
                    Past <span class="count past-count"></span>
                </button>
        </section>
        <section class="event-container">
                <!-- Populate with cards -->
        </section>
        <button class="switch-btn back" data-show="main-content">Return to homepage</button>
    </main> 


    <!-- ========== FOOTER ========== -->
    <footer>
        <section class="upper-footer">
            <div class="footer-logo-container" id="footer-logo-container">
                <div class="footer-img-container">
                    <img src="./images/logo2.1.png" alt="">
                </div>
                <h3 style="font-family: 'LEMON'; font-size: 24px;">Paw Patrol</h3>
            </div>
            
            <div class="footer-info-container" id="footer-info-container">
                <article>
                    <aside>
                        <h4>RESOURCES <i class="fa-solid fa-caret-down"></i></h4>
                        <a href="">FAQs</a>
                        <a href="">Partnerships</a>
                        <a href="">Contact Us</a>
                    </aside>
                    <aside>
                        <h4>GET INVOLVED <i class="fa-solid fa-caret-down"></i></h4>
                        <a href="">Get Involve</a>
                        <a href="">Adopting Pets</a>
                        <a href="">Animal Shelters & Rescues</a>
                        <a href="">Other Types of Pets</a>
                    </aside>
                    <aside>
                        <h4>ABOUT DOGS & PUPPIES <i class="fa-solid fa-caret-down"></i></h4>
                        <a href="">All About Dogs</a>
                        <a href="">Dog Adoption</a>
                        <a href="">Dog Feeding</a>
                        <a href="">Dog Health & Wellness</a>
                        <a href="">Dog Training</a>
                        <a href="">Other Dog Pet Information</a>
                    </aside>
                    <aside>
                        <h4>ABOUT CATS & KITTENS <i class="fa-solid fa-caret-down"></i></h4>
                        <a href="">All About Cats</a>
                        <a href="">Cat Adoption</a>
                        <a href="">Cat Feeds</a>
                        <a href="">Cat Health & Wellness</a>
                        <a href="">Cat Training</a>
                        <a href="">Other Cat Information</a>
                    </aside>
                </article>
                
                <aside class="footer-sign-up">
                    <p>To get the latest on pet adoption and pet care, sign up for the Paw Patrol newsletter.</p>
                    <a href="" class="sign-up-btn">Sign Up</a>
                </aside>
            </div>

            <div class="legal-info">
                <a href="">Shelter & Rescue Registration</a>
                <a href="">Terms of Service</a>
                <a href="">Privacy Policy</a>
                <a href="">Cookie Policy</a>
                <a href="">Accesibility</a>
            </div>
        </section>

        <section class="lower-footer">
            <div>
                <p>
                    <span>&copy;2025 Paw Patrol.netlify.app</span>   
                    <span>All trademarks are owned by Tomioka-san, or used with permission.</span>
                </p>
                <aside>
                    <a href=""><i class="fa-brands fa-facebook-f"></i></a>
                    <a href=""><i class="fa-brands fa-x-twitter"></i></a>
                    <a href=""><i class="fa-brands fa-instagram"></i></a>
                    <a href=""><i class="fa-brands fa-youtube"></i></a>
                </aside>
            </div>
        </section>
    </footer>

     <!-- Care Tip Full Details Overlay -->
    <div id="careOverlay" class="overlay">
        <div class="overlay-content">
            <button class="close-overlay">&times;</button>
            <h2 id="overlayTitle"></h2>
            <div id="overlayText"></div>
        </div>
    </div>

    <script src="paw-patrol.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="config.js"></script>
    
    <!-- Donation Form Script -->
    <script>
        let emailjsReady = false;

        // Initialize EmailJS 
        function initEmailJS() {
            try {
                if (window.emailjs) {
                    emailjs.init({
                        publicKey: CONFIG.EMAILJS_PUBLIC_KEY
                    });
                    emailjsReady = true;
                    console.log('EmailJS initialized successfully');
                } else {
                    console.error('window.emailjs not found, retrying...');
                    setTimeout(initEmailJS, 500);
                }
            } catch (error) {
                console.error('Error initializing EmailJS:', error);
                setTimeout(initEmailJS, 500);
            }
        }

        window.addEventListener('load', function() {
            initEmailJS();
        });
        if (document.readyState === 'complete') {
            initEmailJS();
        }
        var checkInterval = setInterval(function() {
            if (window.emailjs && !emailjsReady) {
                initEmailJS();
                clearInterval(checkInterval);
            }
        }, 500);

        // Handle amount selection
        function setupAmountSelection() {
            document.querySelectorAll('.amount-options .amount').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.amount-options .amount').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    this.classList.add('selected');
                    
                    const value = this.getAttribute('data-value');
                    const customAmountGroup = document.getElementById('customAmountGroup');
                    const customAmountInput = document.getElementById('customAmount');
                    
                    if (value) {
                        document.getElementById('selectedAmount').value = value;
                        customAmountGroup.style.display = 'none';
                        customAmountInput.value = '';
                    } else if (this.classList.contains('custom')) {
                        document.getElementById('selectedAmount').value = '0';
                        customAmountGroup.style.display = 'block';
                        customAmountInput.focus();
                    }
                });
            });

            // Handle custom amount input
            const customAmount = document.getElementById('customAmount');
            if (customAmount) {
                customAmount.addEventListener('input', function() {
                    if (this.value) {
                        document.getElementById('selectedAmount').value = this.value;
                    }
                });
            }
        }

        // Handle form submission
        function setupFormSubmission() {
            const donationForm = document.getElementById('donationForm');
            if (donationForm) {
                donationForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    if (!emailjsReady || !window.emailjs) {
                        alert('Email service is loading. Please wait a moment and try again.');
                        console.error('EmailJS not ready. Ready:', emailjsReady, 'Exists:', !!window.emailjs);
                        return;
                    }

                    const selectedAmount = document.getElementById('selectedAmount').value;
                    
                    if (!selectedAmount || selectedAmount === '0') {
                        alert('Please select or enter a donation amount');
                        return;
                    }

                    const templateParams = {
                        to_email: 'pawpatrolorganization@gmail.com', 
                        donor_name: document.getElementById('donor-fullname').value,
                        donor_email: document.getElementById('donor-email').value,
                        donor_contact: document.getElementById('donor-contact').value,
                        donation_amount: selectedAmount,
                        donor_message: document.getElementById('donor-message').value,
                        donation_date: new Date().toLocaleDateString()
                    };

                    console.log('Sending donation...');

                    // Send email
                    emailjs.send(CONFIG.EMAILJS_SERVICE_ID, CONFIG.EMAILJS_TEMPLATE_ID, templateParams)
                        .then(function(response) {
                            console.log('Email sent!', response);
                            alert('Thank you for your donation! We will contact you shortly.');
                            document.getElementById('donationForm').reset();
                            document.querySelectorAll('.amount-options .amount').forEach(btn => {
                                btn.classList.remove('selected');
                            });
                            document.getElementById('selectedAmount').value = '0';
                            document.getElementById('customAmountGroup').style.display = 'none';
                            switchPage('main-content');
                        })
                        .catch(function(error) {
                            console.error('Email failed:', error);
                            alert('Error: ' + (error.text || error.message || 'There was an error processing your donation.'));
                        });
                });
            }
        }

        // Function to switch pages
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }
        }

        // Handle volunteer form submission
        function setupHomepageVolunteerFormSubmission() {
            const volunteerForm = document.querySelector('#volunteer-main .volunteer-form');
            if (volunteerForm) {
                volunteerForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    if (!emailjsReady || !window.emailjs) {
                        alert('Email service is loading. Please wait a moment and try again.');
                        console.error('EmailJS not ready. Ready:', emailjsReady, 'Exists:', !!window.emailjs);
                        return;
                    }

                    const templateParams = {
                        to_email: 'pawpatrolorganization@gmail.com', 
                        volunteer_name: document.getElementById('fullName').value,
                        volunteer_email: document.getElementById('email').value,
                        volunteer_phone: document.getElementById('phone').value,
                        volunteer_address: document.getElementById('address').value,
                        availability: document.getElementById('availability').value,
                        commitment: document.getElementById('commitment').value,
                        area_of_interest: document.getElementById('areaOfInterest').value,
                        experience: document.getElementById('experience').value,
                        submission_date: new Date().toLocaleDateString()
                    };

                    console.log('Sending volunteer application...');

                    // Send email
                    emailjs.send(CONFIG.EMAILJS_VOLUNTEER_SERVICE_ID, CONFIG.EMAILJS_VOLUNTEER_TEMPLATE_ID, templateParams)
                        .then(function(response) {
                            console.log('Email sent!', response);
                            alert('Thank you for your volunteer application! We will contact you within 3-5 business days.');
                            volunteerForm.reset();
                            switchPage('main-content');
                        })
                        .catch(function(error) {
                            console.error('Email failed:', error);
                            alert('Error: ' + (error.text || error.message || 'There was an error submitting your application.'));
                        });
                });
            }
        }

        // Setup when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setupAmountSelection();
                setupFormSubmission();
                setupHomepageVolunteerFormSubmission();
            });
        } else {
            setupAmountSelection();
            setupFormSubmission();
            setupHomepageVolunteerFormSubmission();
        }

         // Newsletter
        document.addEventListener('DOMContentLoaded', function() {
            const signUpBtn = document.querySelector('.sign-up-btn');

            if (signUpBtn) {
                signUpBtn.addEventListener('click', function(e) {
                    e.preventDefault();

                    Swal.fire({
                        title: 'Subscribe to our Newsletter',
                        text: 'Stay updated with the latest pet care tips and adoption news!',
                        input: 'email',
                        inputPlaceholder: 'Enter your email address',
                        icon: 'envelope',
                        confirmButtonText: 'Subscribe',
                        confirmButtonColor: '#7C3AED', 
                        showCancelButton: true,
                        cancelButtonColor: '#f26929', 
                        validationMessage: 'Please enter a valid email address'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const userEmail = result.value;
                            
                            console.log("Newsletter subscription for:", userEmail);

                            Swal.fire({
                                title: 'Subscribed!',
                                text: `Thank you! We've added ${userEmail} to our newsletter list.`,
                                icon: 'success',
                                confirmButtonColor: '#7C3AED'
                            });
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>
